<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
 apiKey: "AIzaSyCPXY9pfY2vrKNEOgenBkYpQqa2SSUQLTk",
 authDomain: "talks-b6037.firebaseapp.com",
 databaseURL: "https://talks-b6037-default-rtdb.firebaseio.com",
 projectId: "talks-b6037",
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.onload = () => {
 const list = document.getElementById("users");
 onValue(ref(db, "users"), snap => {
   list.innerHTML = "";
   snap.forEach(u => {
     let d = u.val();
     list.innerHTML += `
      <div style="border:1px solid #ccc;padding:10px;margin:10px">
       <b>${d.email}</b><br>
       Balance: â‚¹${d.balance || 0}
       <br>
       <button onclick="add('${u.key}',10)">+10</button>
       <button onclick="add('${u.key}',-10)">-10</button>
      </div>`;
   });
 });
};

window.add = (id, amt) => {
 const r = ref(db, "users/"+id);
 onValue(r, s=>{
   update(r,{balance:(s.val().balance||0)+amt});
 },{once:true});
};
</script>
</head>
<body>
<h2>Admin Panel</h2>
<div id="users"></div>
</body>
</html>
